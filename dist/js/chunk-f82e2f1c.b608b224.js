(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f82e2f1c"],{"0e88":function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var s=i("1bab");function r(t){return Object(s["a"])({url:"/top/list?idx="+t})}function n(t){return Object(s["a"])({url:"/song/url?id="+t})}function a(t){return Object(s["a"])({url:"/lyric?id="+t})}},"1c66":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rank-nav",attrs:{id:"RankNavBar"}},[s("title-bar",[s("div",{staticClass:"left",attrs:{slot:"left"},slot:"left"},[s("img",{attrs:{src:i("7a74")},on:{click:function(e){return t.back()}}}),s("div",{staticClass:"left-font"},[t._v(t._s(t.font))])])])],1)},r=[],n=i("40be"),a=(i("2f62"),{name:"TitleBarLeft",components:{TitleBar:n["a"]},props:{font:{type:String,default:function(){return""}}},methods:{back:function(){this.$store.commit("isShow"),this.$router.back()}}}),c=a,o=(i("ac9f"),i("2877")),l=Object(o["a"])(c,s,r,!1,null,"3ea371a0",null);e["a"]=l.exports},"3f71":function(t,e,i){},"40be":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-bar"},[i("div",{staticClass:"left"},[t._t("left")],2),i("div",{staticClass:"center"},[t._t("center")],2),i("div",{staticClass:"right"},[t._t("right")],2)])},r=[],n={name:"TitleBar"},a=n,c=(i("45a3"),i("2877")),o=Object(c["a"])(a,s,r,!1,null,"253a8e82",null);e["a"]=o.exports},"45a3":function(t,e,i){"use strict";var s=i("f9a7"),r=i.n(s);r.a},"4d66":function(t,e,i){t.exports=i.p+"img/play.b6894c39.svg"},"521c":function(t,e,i){var s,r,n;(function(i,a){"use strict";r=[],s=a,n="function"===typeof s?s.apply(e,r):s,void 0===n||(t.exports=n)})(0,(function(){"use strict";var t=function(t){this.timestamp_offset=0,this.lyrics_all=void 0,this.meta_info=void 0,this.ID_TAGS=[{name:"artist",id:"ar"},{name:"album",id:"al"},{name:"title",id:"ti"},{name:"author",id:"au"},{name:"length",id:"length"},{name:"by",id:"by"},{name:"offset",id:"offset",handler:this.setTimestampOffset},{name:"createdBy",id:"re"},{name:"createdByVersion",id:"ve"}];for(var e=0;e<this.ID_TAGS.length;e++)this.ID_TAGS[e].re=new RegExp("\\["+this.ID_TAGS[e].id+":(.*)\\]$","g");t&&this.load(t)};return t.prototype={constructor:t,load:function(t){this.lyrics_all=new Array,this.meta_info=new Object,this.timestamp_offset=0;for(var e=String(t).split("\n"),i=0;i<e.length;i++){var s=e[i].replace(/(^\s*)|(\s*$)/g,"");if(s){for(var r=!1,n=0;n<this.ID_TAGS.length;n++){var a=this.ID_TAGS[n].re.exec(s);if(a&&!(a.length<2)){r=!0;var c=a[1].replace(/(^\s*)|(\s*$)/g,"");"function"==typeof this.ID_TAGS[n].handler?this.meta_info[String(this.ID_TAGS[n].name)]=this.ID_TAGS[n].handler.call(this,c):this.meta_info[String(this.ID_TAGS[n].name)]=String(c)}}if(!r){var o=Array();while(1){a=/^(\[\d+:\d+(.\d+)?\])(.*)/g.exec(s);if(!a)break;o.push(a[1]),s=a[a.length-1].replace(/(^\s*)|(\s*$)/g,"")}for(n=0;n<o.length;n++){var l=/^\[(\d{1,2}):(\d|[0-5]\d)(\.(\d+))?\]$/g.exec(o[n]);l&&this.lyrics_all.push({timestamp:60*Number(l[1])+Number(l[2])+(l[4]?Number("0."+l[4]):0),text:s})}}}}return this.lyrics_all.sort((function(t,e){return t.timestamp>e.timestamp?1:-1})),this.lyrics_all.length||(this.lyrics_all=void 0),this.isEmpty(this.meta_info)&&(this.meta_info=void 0),void 0!==this.lyrics_all||void 0!==this.meta_info},getLyrics:function(){return this.lyrics_all},getLyric:function(t){try{return this.lyrics_all[t]}catch(e){return}},getIDTags:function(){return this.meta_info},select:function(t){if(isNaN(t))return-1;var e=Number(t)+this.timestamp_offset,i=0;if(e<this.lyrics_all[0].timestamp)return-1;for(i=0;i<this.lyrics_all.length-1;i++)if(this.lyrics_all[i].timestamp<=e&&this.lyrics_all[i+1].timestamp>e)break;return i},setTimestampOffset:function(t){return this.timestamp_offset=isNaN(t)?0:Number(t)/1e3,Number(t)},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},t}))},"5fed":function(t,e,i){t.exports=i.p+"img/pause.a740e5cf.svg"},"61f0":function(t,e,i){t.exports=i.p+"img/disk.99498b4c.png"},7230:function(t,e,i){},"7a74":function(t,e,i){t.exports=i.p+"img/back.ca13cf10.svg"},"7c8d":function(t,e,i){"use strict";var s=i("3f71"),r=i.n(s);r.a},"938e":function(t,e,i){t.exports=i.p+"img/styli.4f50c8e8.png"},ac9f:function(t,e,i){"use strict";var s=i("7230"),r=i.n(s);r.a},adce:function(t,e,i){t.exports=i.p+"img/next.20a116f4.svg"},d568:function(t,e,i){t.exports=i.p+"img/previous.358a4b04.svg"},e02a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"detail"}},[s("div",{staticClass:"bg"},[s("div",{staticClass:"nav"},[s("title-bar-left"),s("div",{staticClass:"font"},[t._v(" "+t._s(t.$store.state.music.songItem.songName)),s("br"),t._v(" "+t._s(t.$store.state.music.songItem.singerName)+" ")])],1)]),s("div",{staticClass:"blur",style:{backgroundImage:this.getUrl,backgroundSize:this.getSize}}),s("div",{staticClass:"main"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showLyric,expression:"showLyric"}],ref:"wrapper",staticClass:"lyric",on:{click:t.cLyric}},[s("div",{staticClass:"content"},t._l(t.Lyric,(function(e,i){return s("p",{key:i,ref:"lyricLine",refInFor:!0,class:{current:t.currentLineNum===i}},[t._v(" "+t._s(e.text)+" ")])})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showLyric,expression:"!showLyric"}],staticClass:"lyric-close"},[s("div",{staticClass:"gan",style:{transform:this.transform}},[s("img",{attrs:{src:i("938e")}})]),t._m(0),s("div",{staticClass:"imgShow",on:{click:t.lric}},[s("img",{style:{webkitAnimationPlayState:this.imgShows},attrs:{src:this.$store.state.music.songItem.picUrl}})])])]),s("div",{staticClass:"tail"},[s("div",{staticClass:"progress"},[s("p",{staticClass:"nowTime"},[t._v(t._s(this.currentTime))]),s("div",{staticClass:"now-progress",style:{width:t.progress}}),s("div",{staticClass:"glo-progress",style:{marginLeft:t.progress}}),s("p",{staticClass:"totalTime"},[t._v(t._s(this.totalTime))]),s("div",{staticClass:"backPro"})]),s("div",{staticClass:"control"},[s("div",{staticClass:"previous",on:{click:t.preClick}},[s("img",{attrs:{src:i("d568")}})]),t.$store.state.Pause?s("div",{staticClass:"pause",on:{click:t.pause}},[s("img",{attrs:{src:i("5fed")}})]):s("div",{staticClass:"play",on:{click:t.pause}},[s("img",{attrs:{src:i("4d66")}})]),s("div",{staticClass:"next",on:{click:t.nextClick}},[s("img",{attrs:{src:i("adce")}})])])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"disk"},[s("img",{attrs:{src:i("61f0")}})])}],n=i("1c66"),a=(i("2f62"),i("0e88")),c=i("1fba"),o=i("521c"),l=i.n(o),u={name:"PlayDetail",components:{TitleBarLeft:n["a"]},data:function(){return{url:"",progress:"0%",currentTime:"00:00",totalTime:"00:00",showLyric:!1,Lyric:{},currentLineNum:0}},computed:{getUrl:function(){return"url("+this.$store.state.music.songItem.picUrl+")"},getSize:function(){return"100%"},transform:function(){if(1==this.$store.state.Pause)return"rotate(25deg)"},imgShows:function(){if(1==!this.$store.state.Pause)return"paused"},getCurrentTime:function(){setInterval((function(){var t=document.getElementById("audio");return t.currentTime}),500)},getDuration:function(){var t=document.getElementById("audio");return t.duration}},methods:{pause:function(){this.$store.commit("isPause");var t=document.getElementById("audio");this.$store.state.Pause?t.play():t.pause()},nextClick:function(){var t=this,e={},i={},s=this.$store.state.music.index+1;i=this.$store.state.songSheet[0][s],Object(a["c"])(this.$store.state.songSheet[0][s].id).then((function(r){t.url=r.data.data[0].url,e={index:s,songItem:i,url:t.url},t.$store.commit("changePlay",e)}))},preClick:function(){var t=this,e={},i={},s=this.$store.state.music.index-1;i=this.$store.state.songSheet[0][s],Object(a["c"])(this.$store.state.songSheet[0][s].id).then((function(r){t.url=r.data.data[0].url,e={index:s,songItem:i,url:t.url},t.$store.commit("changePlay",e)}))},formatSecond:function(t){var e=Math.floor(t/60),i=Math.floor(t%60);return e+="",i+="",e=1==e.length?"0"+e:e,i=1==i.length?"0"+i:i,e+":"+i},lric:function(){var t=this;Object(a["a"])(this.$store.state.music.songItem.id).then((function(e){t.showLyric=!0;var i=new l.a(e.data.lrc.lyric);t.Lyric=i.lyrics_all.filter((function(t,e){return""!==t.text})),t.BScroll=new c["a"](t.$refs.wrapper,{click:!0});var s=document.getElementById("audio");setInterval((function(){if(t.Lyric.forEach((function(e,i){if(s.currentTime>=e.timestamp){while(i+1==t.currentLineNum)t.currentLineNum++;t.currentLineNum=i}})),t.currentLineNum>7){var e=t.$refs.lyricLine[t.currentLineNum-7];t.BScroll.scrollToElement(e,1e3)}else t.BScroll.scrollToElement(0,0,1e3)}),800)}))},cLyric:function(){this.showLyric=!1}},mounted:function(){var t=this,e=document.getElementById("audio");setInterval((function(){var i=e.currentTime/e.duration;t.currentTime=t.formatSecond(e.currentTime),t.totalTime=t.formatSecond(e.duration);var s=(100*i).toFixed(2);s+="%",t.progress=s}),30)}},f=u,m=(i("7c8d"),i("2877")),d=Object(m["a"])(f,s,r,!1,null,"3bb7c2e5",null);e["default"]=d.exports},f9a7:function(t,e,i){}}]);
//# sourceMappingURL=chunk-f82e2f1c.b608b224.js.map